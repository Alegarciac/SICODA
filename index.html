<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SICODA - Sistema de Control Documental</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f9;
  margin: 0;
  padding: 0;
}
header {
  text-align: center;
  background: #ffffff;
  padding: 20px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
header img {
  max-width: 200px;
}
.container {
  max-width: 800px;
  margin: 20px auto;
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
h1 {
  text-align: center;
  color: #333;
}
form label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
  color: #444;
}
form input, form select, form textarea {
  width: 100%;
  padding: 10px;
  margin-top: 5px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 14px;
}
button {
  margin-top: 20px;
  padding: 12px;
  width: 100%;
  background: #007bff;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
}
button:hover {
  background: #0056b3;
}
.mensaje {
  margin-top: 20px;
  padding: 15px;
  border-radius: 8px;
  background: #d4edda;
  color: #155724;
  display: none;
}
footer {
  text-align: center;
  margin: 30px 0;
  font-size: 14px;
}
footer a {
  color: #007bff;
  text-decoration: none;
}
</style>
</head>
<body>
<header>
  <img src="https://github.com/Alegarciac/SICODA/blob/main/LOGO%20HAP%20con%20R.png?raw=true" alt="Logo HAP">
  <h1>SICODA - Sistema de Control Documental</h1>
  <img src="https://github.com/Alegarciac/SICODA/blob/main/PORTADA.jpg?raw=true" alt="Portada" style="max-width:100%; border-radius:12px; margin-top:10px;">
</header>

<div class="container" id="mainCard">
<form id="sicodaForm">
  <label for="tipo">Tipo de solicitud:</label>
  <select id="tipo" name="tipo" required>
    <option value="">-- Seleccionar --</option>
    <option value="ALTA">ALTA</option>
    <option value="MODIFICACI√ìN">MODIFICACI√ìN</option>
    <option value="BAJA">BAJA</option>
  </select>

  <label for="nombre">Nombre del documento:</label>
  <input type="text" id="nombre" name="nombre" required>

  <label for="tipoDoc">Tipo de documento:</label>
  <select id="tipoDoc" name="tipoDoc" required>
    <option value="">-- Seleccionar --</option>
    <option value="Procedimiento">Procedimiento</option>
    <option value="Instructivo">Instructivo</option>
    <option value="Formato">Formato</option>
    <option value="Pol√≠tica">Pol√≠tica</option>
    <option value="Otro">Otro</option>
  </select>

  <label for="area">√Årea responsable:</label>
  <input type="text" id="area" name="area" required>

  <label for="solicitante">Solicitante:</label>
  <input type="text" id="solicitante" name="solicitante" required>

  <label for="fecha">Fecha de solicitud:</label>
  <input type="date" id="fecha" name="fecha" required>

  <label for="just">Justificaci√≥n:</label>
  <textarea id="just" name="just" required></textarea>

  <div id="extraFields" style="display:none;">
    <label for="codigo">C√≥digo del documento:</label>
    <input type="text" id="codigo" name="codigo">

    <label for="version">Versi√≥n actual:</label>
    <input type="text" id="version" name="version">

    <div id="modFields" style="display:none;">
      <label for="secciones">Secciones afectadas:</label>
      <input type="text" id="secciones" name="secciones">

      <label for="descripcion">Descripci√≥n del cambio:</label>
      <textarea id="descripcion" name="descripcion"></textarea>
    </div>
  </div>

  <button type="submit">Enviar Solicitud</button>
</form>

<div class="mensaje" id="mensaje">
  ‚úÖ Gracias, tu solicitud ha sido generada.<br>
  ‚è≥ Redirigiendo al inicio...<br>
  üéâ Te contactaremos pronto.
</div>
</div>

<footer>
<p>Respaldo en Google Sheets: <a href="https://docs.google.com/spreadsheets/d/1rHyDUGIsoqpIxi3jdySyJ96z65097gvOHO01NMi9wdw/edit?gid=0#gid=0" target="_blank">Solicitud SICODA</a></p>
</footer>

<script>
const form = document.getElementById('sicodaForm');
const tipo = document.getElementById('tipo');
const extraFields = document.getElementById('extraFields');
const modFields = document.getElementById('modFields');
const mensaje = document.getElementById('mensaje');
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwfd7FsAw29Rb-ywzFVmR7pp1itK_mJmfJvSCLIGLbhh9G1NZiLqBEv_FSRqNFG0mef/exec";

tipo.addEventListener('change', function(){
  extraFields.style.display = (this.value === 'BAJA' || this.value === 'MODIFICACI√ìN') ? 'block' : 'none';
  modFields.style.display = (this.value === 'MODIFICACI√ìN') ? 'block' : 'none';
});

form.addEventListener('submit', function(e){
  e.preventDefault();
  const formData = new FormData(form);
  fetch(SCRIPT_URL, { method: 'POST', body: formData })
    .then(response => response.text())
    .then(() => {
      mensaje.style.display = 'block';
      window.scrollTo({ top: 0, behavior: 'smooth' });
      form.reset();
      tipo.dispatchEvent(new Event('change'));
      setTimeout(()=>{ mensaje.style.display = 'none'; },5000);
    })
    .catch(err => alert("Error al enviar: " + err));
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SICODA - Sistema de Control Documental</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f9;
      margin: 0;
      padding: 0;
    }
    header {
      text-align: center;
      background: #ffffff;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    header img {
      max-width: 200px;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #333;
    }
    form label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
      color: #444;
    }
    form input, form select, form textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
    }
    button {
      margin-top: 20px;
      padding: 12px;
      width: 100%;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #0056b3;
    }
    .mensaje {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      background: #d4edda;
      color: #155724;
      display: none;
    }
    footer {
      text-align: center;
      margin: 30px 0;
      font-size: 14px;
    }
    footer a {
      color: #007bff;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <header>
    <img src="https://github.com/Alegarciac/SICODA/blob/main/LOGO%20HAP%20con%20R.png?raw=true" alt="Logo HAP">
    <h1>SICODA - Sistema de Control Documental</h1>
    <img src="https://github.com/Alegarciac/SICODA/blob/main/PORTADA.jpg?raw=true" alt="Portada" style="max-width:100%; border-radius:12px; margin-top:10px;">
  </header>

  <div class="container" id="mainCard">
    <form id="respuestasForm">
      <label for="tipo">Tipo de solicitud:</label>
      <select id="tipo" required>
        <option value="">-- Seleccionar --</option>
        <option value="ALTA">ALTA</option>
        <option value="MODIFICACI√ìN">MODIFICACI√ìN</option>
        <option value="BAJA">BAJA</option>
      </select>

      <label for="nombre">Nombre del documento:</label>
      <input type="text" id="nombre" required>

      <label for="tipoDoc">Tipo de documento:</label>
      <select id="tipoDoc" required>
        <option value="">-- Seleccionar --</option>
        <option value="Procedimiento">Procedimiento</option>
        <option value="Instructivo">Instructivo</option>
        <option value="Formato">Formato</option>
        <option value="Pol√≠tica">Pol√≠tica</option>
        <option value="Otro">Otro</option>
      </select>

      <label for="area">√Årea responsable:</label>
      <input type="text" id="area" required>

      <label for="solicitante">Solicitante:</label>
      <input type="text" id="solicitante" required>

      <label for="fecha">Fecha de solicitud:</label>
      <input type="date" id="fecha" required>

      <label for="just">Justificaci√≥n:</label>
      <textarea id="just" required></textarea>

      <div id="extraFields" style="display:none;">
        <label for="codigo">C√≥digo del documento:</label>
        <input type="text" id="codigo">

        <label for="version">Versi√≥n actual:</label>
        <input type="text" id="version">

        <div id="modFields" style="display:none;">
          <label for="secciones">Secciones afectadas:</label>
          <input type="text" id="secciones">

          <label for="descripcion">Descripci√≥n del cambio:</label>
          <textarea id="descripcion"></textarea>
        </div>
      </div>

      <button type="button" id="submitBtn">Enviar Solicitud</button>
    </form>

    <div class="mensaje" id="mensaje">
      ‚úÖ Gracias, tu solicitud ha sido generada.<br>
      ‚è≥ Redirigiendo al inicio...<br>
      üéâ Te contactaremos pronto.
    </div>
  </div>

  <footer>
    <p>Respaldo en Google Sheets: <a href="https://docs.google.com/spreadsheets/d/1rHyDUGIsoqpIxi3jdySyJ96z65097gvOHO01NMi9wdw/edit?gid=0#gid=0" target="_blank">Solicitud SICODA</a></p>
  </footer>

  <script>
    const form = document.getElementById('respuestasForm');
    const tipo = document.getElementById('tipo');
    const extraFields = document.getElementById('extraFields');
    const modFields = document.getElementById('modFields');
    const submitBtn = document.getElementById('submitBtn');
    const mensaje = document.getElementById('mensaje');

    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwfd7FsAw29Rb-ywzFVmR7pp1itK_mJmfJvSCLIGLbhh9G1NZiLqBEv_FSRqNFG0mef/exec";

    tipo.addEventListener('change', function(){
      if(this.value === 'BAJA' || this.value === 'MODIFICACI√ìN'){
        extraFields.style.display = 'block';
      } else {
        extraFields.style.display = 'none';
      }
      if(this.value === 'MODIFICACI√ìN'){
        modFields.style.display = 'block';
      } else {
        modFields.style.display = 'none';
      }
    });

    function validate(){
      return form.checkValidity();
    }

    submitBtn.addEventListener('click', function(){
      if(!validate()) return;

      const formData = {
        tipo: document.getElementById('tipo').value,
        nombre: document.getElementById('nombre').value,
        tipoDoc: document.getElementById('tipoDoc').value,
        area: document.getElementById('area').value,
        solicitante: document.getElementById('solicitante').value,
        fecha: document.getElementById('fecha').value,
        just: document.getElementById('just').value,
        codigo: document.getElementById('codigo').value,
        version: document.getElementById('version').value,
        secciones: document.getElementById('secciones').value,
        descripcion: document.getElementById('descripcion').value
      };

      fetch(SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData)
      })
      .then(() => {
        mensaje.style.display = 'block';
        document.getElementById('mainCard').scrollIntoView({behavior:'smooth',block:'start'});
        setTimeout(()=>{ form.reset(); tipo.dispatchEvent(new Event('change')); },200);
        setTimeout(()=>{ mensaje.style.display = 'none'; },5000);
      })
      .catch(err => alert("Error al enviar: " + err));
    });
  </script>
</body>
</html>

